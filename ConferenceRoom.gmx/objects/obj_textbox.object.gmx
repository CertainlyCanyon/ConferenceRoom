<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_textbox</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
///Create some variables
xOffset = 5;
yOffset = 5;
width = 800;
height = 200;
padding = 8;

prezLen = 0;



difficulty = 1;

text[9] = "";
dialougeStage = 0;
change_state = false;
doneTyping = false;
scr_dialouge(id, difficulty);

ans[2] = 0; 

needInput = false;
choice = 0;
correctChoice = 0;

phase1 = false;
down = false;

prezLeft = 5;

draw_set_font(font0);


start = ds_list_create();
ds_list_add(start, 0);

count = 0;
last_space = 0;
line = 0;

message = text[0];
str = "";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///destroy ds list
ds_list_destroy(start);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(str == message)
{
    doneTyping = true;
}
if(change_state)
{
    ds_list_clear(start);
    ds_list_add(start, 0);
    
    doneTyping = false;
    count = 0;
    last_space = 0;
    line = 0;
    message = text[dialougeStage];
    if(string_char_at(message, 1) == '*')
    {
        needInput = true;
        message = string_delete(message, 1, 1);
        var pos1 = string_pos("#", message);
        var qStart = pos1;
        message = string_delete(message, pos1, 1);
        var pos2 = string_pos("#", message);
        message = string_delete(message, pos2, 1);
        var a1 = string_copy(message, pos1, pos2-pos1);
        pos1 = pos2;
        pos2 = string_pos("#", message);
        message = string_delete(message, pos2, 1);
        var a2 = string_copy(message, pos1, pos2-pos1);
        pos1 = pos2;
        pos2 = string_pos("#", message);
        message = string_delete(message, pos2, 1);
        var a3 = string_copy(message, pos1, pos2-pos1);
        pos1 = pos2;
        var a4 = string_copy(message, pos1, string_length(message) + 1 -pos1);
        message = string_delete(message, qStart, string_length(message) + 1 - qStart);
        
        ans[2] = a4;
        ans[1] = a3;
        ans[0] = a2;
        
        correctChoice = irandom_range(1,4);
        for(i = 0; i &lt; correctChoice - 1; i++)
        {
            message += "#" + ans[i];
        }
        message += "#" + a1;
        for(i = correctChoice-1; i &lt; 3; i++)
        {
            message += "#" + ans[i];
        }
        needInput = true;
    }
    change_state = false;
}

if(doneTyping &amp;&amp; obj_health_bar.jobstatus &gt; 0)
{
    obj_health_bar.jobstatus -= .02;
}





if(y &gt; (display_get_height() - sprite_height/2 - 20) &amp;&amp; !down)
{
    y -= 20;
}
if(y &lt;= (display_get_height() - sprite_height/2 - 20) &amp;&amp; y &gt;= (sprite_height/2 + 20) &amp;&amp; !phase1)
{
    phase1 = true;
}
if(y &lt; (sprite_height/2 + 20) &amp;&amp; !down)
{
    y += 20;
}

y += 20*down;

if(y &gt; display_get_height() + 600)
{
    instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(needInput)
{
    if(mouse_y &gt; y + 42 &amp;&amp; mouse_y &lt; y + 68)
    {
        choice = 1;
    }
    if(mouse_y &gt; y + 68 &amp;&amp; mouse_y &lt; y + 92)
    {
        choice = 2;
    }
    if(mouse_y &gt; y + 92 &amp;&amp; mouse_y &lt; y + 120)
    {
        choice = 3;
    }
    if(mouse_y &gt; y + 122 &amp;&amp; mouse_y &lt; y + 150)
    {
        choice = 4;
    }
    if(choice == correctChoice)
    {
        obj_health_bar.jobstatus += 10;
        change_state = true;
        dialougeStage++;
        needInput = false;
    } else {
        obj_health_bar.jobstatus -= 5;
        change_state = true;
        dialougeStage++;
        needInput = false;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_sprite(spr_textbox, 1, x, y);
draw_text(x + 850, y + 10, "Presentation (" + string(-global.presentationsLeft + 6) + "/5)");

if(phase1){
    draw_set_color(c_black);

    if(string_width(str) &gt; width - padding-padding)
    {
        message = string_delete(message, last_space, 1);
        message = string_insert("#", message, last_space);
        ds_list_add(start, last_space + 1);
    } 

    if(count &lt; string_length(message)) {
        if(string_char_at(message, count) == " ") {
            last_space = count;
        }

        count ++;
    }

    if (string_height ( str ) &gt; height-padding) {
        line ++;
    }

    str = string_copy(message, ds_list_find_value(start, line), count-ds_list_find_value( start, line) );

    draw_text(x+padding + xOffset, y+padding + yOffset, str);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(doneTyping)
{
    if(dialougeStage &lt; prezLen)
    {
        if(needInput)
        {
            if(choice != 0)
            {
                change_state = true;
                dialougeStage++;
            }
        } else {
            change_state = true;
            dialougeStage++;
        }
    } else {
        scr_dialouge(id, difficulty);
        change_state = true;
        dialougeStage = 0;
        global.presentationsLeft--;
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
